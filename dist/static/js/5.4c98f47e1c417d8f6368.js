webpackJsonp([5],{B9DK:function(e,t){},TDe6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("fZjL"),a=r.n(n),i=r("Xxa5"),o=r.n(i),s=r("//Fk"),c=r.n(s),u=r("exGp"),p=r.n(u),d=r("Dd8w"),v=r.n(d),f=(r("ASX8"),r("NYxO")),l=(r("IcnI"),r("5reh")),m=r("dztg"),w=r.n(m),b=r("t1OT"),h=r.n(b),_=r("ui2I"),x=r.n(_),g=r("ZZvs"),$={name:"tip",components:{Loading:r.n(g).a},data:function(){return{isLoading:!1,fullPage:!0,form:{receiver:"",amount:""}}},methods:v()({},Object(f.b)({openNetworkModal:l.h}),{makeTipEscrow:function(){var e=this;return p()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("3"===e.$store.state.web3.networkId){t.next=3;break}return e.openNetworkModal(),t.abrupt("return");case 3:return(r=e).isLoading=!0,t.abrupt("return",new c.a(function(){var t=p()(o.a.mark(function t(n,a){var i,s,c,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=w()(h.a),s=w()(x.a),window.Escrow=i,i.setProvider(e.$store.state.web3.web3Instance().currentProvider),i.defaults({from:e.$store.state.web3.web3Instance().eth.coinbase}),s.setProvider(e.$store.state.web3.web3Instance().currentProvider),t.next=8,i.deployed();case 8:return c=t.sent,t.next=11,s.deployed();case 11:u=t.sent,window.EscrowInstance=c,c.address,s.setProvider(e.$store.state.web3.web3Instance().currentProvider),s.defaults({from:e.$store.state.web3.web3Instance().eth.coinbase}),web3.eth.getAccounts(function(){var t=p()(o.a.mark(function t(n,i){var s,p,d;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.form.amount*Math.pow(10,18),p=e.form.receiver,d=i[0],t.prev=3,t.next=6,u.balanceOf(p);case 6:return t.sent.toNumber(),t.next=10,u.approve(c.address,s,{from:d});case 10:return t.next=12,c.tip(p,s,{from:d});case 12:return t.sent,t.next=15,u.balanceOf(p);case 15:t.sent.toNumber(),e.$nextTick(function(){setTimeout(function(){r.isLoading=!1,EventBus.$emit("notification.add",{id:1,title:e.$t("App.tip.tipSentTitle"),text:e.$t("App.tip.tipSentText")})},800)}),r.clearForm(),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),r.isLoading=!1,a(t.t0);case 25:case"end":return t.stop()}},t,e,[[3,21]])}));return function(e,r){return t.apply(this,arguments)}}());case 17:case"end":return t.stop()}},t,e)}));return function(e,r){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}},t,e)}))()},clearForm:function(){var e=this;a()(this.form).forEach(function(t){e.form[t]=""})}})},k=r("XyMi");var P=function(e){r("B9DK")},T=Object(k.a)($,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading-parent"},[r("loading",{attrs:{active:e.isLoading,"can-cancel":!1,"is-full-page":e.fullPage},on:{"update:active":function(t){e.isLoading=t}}}),e._v(" "),r("vue-grid",[r("vue-grid-row",[r("vue-grid-item",[r("h1",[e._v(e._s(e.$t("App.tip.tipPageTitle")))]),e._v(" "),r("p",[e._v(e._s(e.$t("App.tip.tipPageDescription")))]),e._v(" "),r("br"),e._v(" "),r("form",{on:{submit:function(t){t.preventDefault(),e.makeTipEscrow()}}},[r("vue-input",{attrs:{name:"receiver",id:"receiver",required:"",placeholder:e.$t("App.tip.receiverPlaceholderText"),validation:"required"},model:{value:e.form.receiver,callback:function(t){e.$set(e.form,"receiver",t)},expression:"form.receiver"}}),e._v(" "),r("p",[r("em",[e._v(e._s(e.$t("App.tip.receiverDescription")))])]),e._v(" "),r("br"),e._v(" "),r("vue-input",{attrs:{name:"amount",id:"amount",required:"",placeholder:e.$t("App.tip.AmountPlaceholderText"),validation:"required"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),e._v(" "),r("p",[r("em",[e._v(e._s(e.$t("App.tip.amountDescription")))])]),e._v(" "),r("br"),e._v(" "),r("vue-button",{staticStyle:{color:"white"},attrs:{primary:"",loading:e.isLoading},on:{click:function(t){e.makeTipEscrow()}}},[e._v("\n              "+e._s(e.$t("App.tip.sendTipButton"))+"\n            ")])],1)])],1)],1)],1)},[],!1,P,"data-v-3e3e9991",null);t.default=T.exports}});
//# sourceMappingURL=5.4c98f47e1c417d8f6368.js.map