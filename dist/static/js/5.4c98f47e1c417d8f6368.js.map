{"version":3,"sources":["webpack:///src/components/tip.vue","webpack:///./src/components/tip.vue","webpack:///./src/components/tip.vue?963a"],"names":["tip","name","components","Loading","a","data","isLoading","fullPage","form","receiver","amount","methods","extends_default","Object","vuex_esm","openNetworkModal","types","makeTipEscrow","_this","this","asyncToGenerator_default","regenerator_default","mark","_callee3","self","wrap","_context3","prev","next","$store","state","web3","networkId","abrupt","promise_default","_ref","_callee2","resolve","reject","Escrow","DAI","EscrowInstance","DAIInstance","_context2","truffle_contract_default","Escrow_default","DAI_default","window","setProvider","web3Instance","currentProvider","defaults","from","eth","coinbase","deployed","sent","address","getAccounts","_ref2","_callee","error","accounts","payment","sender","_context","Math","pow","balanceOf","toNumber","approve","$nextTick","setTimeout","EventBus","$emit","id","title","$t","text","clearForm","t0","stop","_x3","_x4","apply","arguments","_x","_x2","_this2","keys_default","forEach","key","__vue_styles__","context","__webpack_require__","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","active","can-cancel","is-full-page","on","update:active","$event","_v","_s","submit","preventDefault","required","placeholder","validation","model","value","callback","$$v","$set","expression","staticStyle","color","primary","loading","click","__webpack_exports__"],"mappings":"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","file":"static/js/5.4c98f47e1c417d8f6368.js","sourcesContent":["<template>\n  <div class=\"loading-parent\">\n      <loading\n          :active.sync=\"isLoading\"\n          :can-cancel=\"false\"\n          :is-full-page=\"fullPage\">\n      </loading>\n      <vue-grid>\n        <vue-grid-row>\n\n          <vue-grid-item>\n            <h1>{{ $t('App.tip.tipPageTitle' /* Tip Anyone! */) }}</h1>\n            <p>{{ $t('App.tip.tipPageDescription' /* Send cryptocurrency (DAI) to anyone. For a job well done, for a\n              service, for rent, food and more. Remember that $1 DAI is equal to $1 USD. */) }}</p>\n            <br>\n\n            <form @submit.prevent=\"makeTipEscrow()\">\n\n              <vue-input\n                name=\"receiver\"\n                id=\"receiver\"\n                required\n                :placeholder=\"$t('App.tip.receiverPlaceholderText') /* Receiver */\"\n                validation=\"required\"\n                v-model=\"form.receiver\"/>\n              <p><em>{{ $t('App.tip.receiverDescription' /* Paste in the ethereum address of the person who should receive\n                your DAI. Remember this is irreversible so make sure you have the right address. */) }}</em></p>\n\n              <br>\n\n              <vue-input\n                name=\"amount\"\n                id=\"amount\"\n                required\n                :placeholder=\"$t('App.tip.AmountPlaceholderText') /* Amount in USD */\"\n                validation=\"required\"\n                v-model=\"form.amount\"/>\n              <p><em>{{ $t('App.tip.amountDescription' /* Enter how much you would like to send in USD. */) }}</em></p>\n\n              <br>\n\n              <vue-button primary style=\"color: white;\"\n                          :loading=\"isLoading\"\n                          @click=\"makeTipEscrow()\">\n                {{ $t('App.tip.sendTipButton' /* Send Tip */) }}\n              </vue-button>\n\n            </form>\n          </vue-grid-item>\n\n\n        </vue-grid-row>\n      </vue-grid>\n    </div>\n</template>\n\n<script>\n  import {NETWORKS} from \"../util/constants/networks\";\n  import {mapActions, mapGetters, mapMutations, mapState} from 'vuex';\n  import {store} from '../store/'\n  import * as types from '../store/types'\n  import truffleContract from \"truffle-contract\";\n  import EscrowContract from \"../../contracts/build/contracts/Escrow.json\";\n  import DAIContract from \"../../contracts/build/contracts/DAI.json\";\n  import Loading from 'vue-loading-overlay';\n\n  export default {\n    name: \"tip\",\n    components: {\n      Loading\n    },\n    data() {\n      return {\n        isLoading: false,\n        fullPage: true,\n        form: {\n          receiver: \"\",\n          amount: \"\"\n        }\n      };\n    },\n    methods: {\n      ...mapActions({\n        openNetworkModal: types.OPEN_NETWORK_MODAL\n      }),\n      async makeTipEscrow() {\n\n        if (this.$store.state.web3.networkId !== \"3\") {\n          this.openNetworkModal();\n          return;\n        }\n\n        const self = this;\n        self.isLoading = true;\n\n        return new Promise(async (resolve, reject) => {\n\n          const Escrow = truffleContract(EscrowContract);\n          const DAI = truffleContract(DAIContract);\n\n          window.Escrow = Escrow;\n          Escrow.setProvider(this.$store.state.web3.web3Instance().currentProvider);\n          Escrow.defaults({from: this.$store.state.web3.web3Instance().eth.coinbase});\n          DAI.setProvider(this.$store.state.web3.web3Instance().currentProvider);\n\n          const EscrowInstance = await Escrow.deployed();\n          const DAIInstance = await DAI.deployed();\n\n          window.EscrowInstance = EscrowInstance;\n          const pool = EscrowInstance.address;\n\n          DAI.setProvider(this.$store.state.web3.web3Instance().currentProvider);\n          DAI.defaults({from: this.$store.state.web3.web3Instance().eth.coinbase});\n\n          web3.eth.getAccounts(async (error, accounts) => {\n\n            const payment = this.form.amount * (10 ** 18);\n            const receiver = this.form.receiver;\n            const sender = accounts[0];\n\n            try {\n              let receiver_balance_before = await DAIInstance.balanceOf(receiver);\n              receiver_balance_before = receiver_balance_before.toNumber();\n\n              await DAIInstance.approve(EscrowInstance.address, payment, {\n                from: sender\n              });\n\n              const result = await EscrowInstance.tip(receiver, payment, {\n                from: sender\n              });\n\n              let receiver_balance_after = await DAIInstance.balanceOf(receiver);\n              receiver_balance_after = receiver_balance_after.toNumber();\n\n              this.$nextTick(() => {\n                setTimeout(() => {\n                  self.isLoading = false;\n\n                  EventBus.$emit('notification.add', {\n                    id: 1,\n                    title: this.$t(\"App.tip.tipSentTitle\" /* Success! */),\n                    text: this.$t(\"App.tip.tipSentText\" /* Your DAI transfer is complete! */)\n                  });\n                }, 800);\n              });\n              self.clearForm();\n            } catch (error) {\n              self.isLoading = false;\n              reject(error);\n            }\n          })\n        })\n      },\n      clearForm() {\n        Object.keys(this.form).forEach(key => {\n          this.form[key] = '';\n        });\n      },\n    }\n  };\n</script>\n\n<style scoped>\n.loading-parent {\n  position: relative;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tip.vue","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e3e9991\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tip.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tip.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tip.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e3e9991\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tip.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e3e9991\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tip.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading-parent\"},[_c('loading',{attrs:{\"active\":_vm.isLoading,\"can-cancel\":false,\"is-full-page\":_vm.fullPage},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_vm._v(\" \"),_c('vue-grid',[_c('vue-grid-row',[_c('vue-grid-item',[_c('h1',[_vm._v(_vm._s(_vm.$t('App.tip.tipPageTitle' /* Tip Anyone! */)))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.$t('App.tip.tipPageDescription' /* Send cryptocurrency (DAI) to anyone. For a job well done, for a\n            service, for rent, food and more. Remember that $1 DAI is equal to $1 USD. */)))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.makeTipEscrow()}}},[_c('vue-input',{attrs:{\"name\":\"receiver\",\"id\":\"receiver\",\"required\":\"\",\"placeholder\":_vm.$t('App.tip.receiverPlaceholderText') /* Receiver */,\"validation\":\"required\"},model:{value:(_vm.form.receiver),callback:function ($$v) {_vm.$set(_vm.form, \"receiver\", $$v)},expression:\"form.receiver\"}}),_vm._v(\" \"),_c('p',[_c('em',[_vm._v(_vm._s(_vm.$t('App.tip.receiverDescription' /* Paste in the ethereum address of the person who should receive\n              your DAI. Remember this is irreversible so make sure you have the right address. */)))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('vue-input',{attrs:{\"name\":\"amount\",\"id\":\"amount\",\"required\":\"\",\"placeholder\":_vm.$t('App.tip.AmountPlaceholderText') /* Amount in USD */,\"validation\":\"required\"},model:{value:(_vm.form.amount),callback:function ($$v) {_vm.$set(_vm.form, \"amount\", $$v)},expression:\"form.amount\"}}),_vm._v(\" \"),_c('p',[_c('em',[_vm._v(_vm._s(_vm.$t('App.tip.amountDescription' /* Enter how much you would like to send in USD. */)))])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('vue-button',{staticStyle:{\"color\":\"white\"},attrs:{\"primary\":\"\",\"loading\":_vm.isLoading},on:{\"click\":function($event){_vm.makeTipEscrow()}}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('App.tip.sendTipButton' /* Send Tip */))+\"\\n            \")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e3e9991\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tip.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}